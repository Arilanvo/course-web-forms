<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Quiz - Touch Slider</title>
	<link rel="stylesheet" href="css/styles.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
</head>
<body>
	<div class="main">
		<div class="slider-main">
			<h3>Slide me</h3>
			<svg height="10" width="150">
			  <line x1="0" y1="5" x2="150" y2="5" style="stroke:rgb(0,0,0);stroke-width:2" />
			</svg>
			<div id="toggle">|||</div>
		</div>
	</div>
	<script>
		(function() {
		var toggle = document.querySelector('#toggle');

		function TouchPositionManager () {
			this.origin = toggle.getBoundingClientRect().left;
			this.latestPosition = NaN;
			this.leftOffset = NaN;

			// also needs some boundaries
		};

		TouchPositionManager.prototype = {
			register: function (position) {
				this.latestPosition = position - (this.leftOffset || 0);
			},
			getDiffFromOrigin: function () {
				var diff = this.latestPosition - this.origin;
				return diff;
			}
		}
		var tPM = new TouchPositionManager();

		function attachEventListeners() {
			var $toggle = $('#toggle');
			$toggle.on('touchmove', function (event) {				
				tPM.register(event.originalEvent.touches[0].pageX);
				requestAnimationFrame(slide);
			});
			$toggle.on('touchend', function (event) {
				attachEventListeners();
			})
		}
		attachEventListeners();

		function slide() {
			var touchOffset = tPM.getDiffFromOrigin();
			toggle.style.webkitTransform = "translateX(" + touchOffset + "px)";
		}

	})();
	</script>
</body>
</html>